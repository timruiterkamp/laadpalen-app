<template>
  <main ref="main" class="site-overview constrained">
    <div class="site__header">
      <h1 class="site__title">
        Welkom bij het prototype van
        <span class="visually-hidden">Recharge</span>
      </h1>
      <svg
        class="logo-dark"
        version="1.1"
        id="Layer_1"
        xmlns="http://www.w3.org/2000/svg"
        xmlns:xlink="http://www.w3.org/1999/xlink"
        x="0px"
        y="0px"
        viewBox="0 0 3593.7 867"
        style="enable-background:new 0 0 3593.7 867;"
        xml:space="preserve"
      >
        <style type="text/css">
  .st0 {
    fill: #ffffff;
  }
  .st1 {
    enable-background: new;
  }
        </style>
        <g id="Group_1" transform="translate(-993.9 -345)">
          <g id="download" transform="translate(993.9 643.905)">
            <path
              id="Path_1"
              class="st0"
              d="M204.6,219.6c0-23.1-31-46-31-69h-9.5c-48.3,0-96.5-0.1-144.8,0.1c-6.5,0-10.3-2.1-12.9-7.8
        			c-8-17.6-8.3-35.1-0.4-52.8c2.6-5.9,6.4-8.4,13.3-8.4c48.3,0.3,96.5,0.2,144.8,0.2h9.8V6.6c3.2-0.3,6-0.7,8.7-0.7
        			c21.4,0,42.7-0.1,64.1,0.1C251,6,255.1,6.8,259,8.4C327.9,36.2,396.8,64.1,465.6,92c5.5,2.2,7.6,5.1,7.4,11
        			c-0.4,15.5-0.1,31-0.1,46.7c1.5,0.3,3,0.5,4.6,0.7c20.3,0,445.8,2.1,466.1,2.3c4.4,0,6.4-1.1,7.4-5.8
        			C969.2,59.3,1043,5.9,1126.3,0.5c20.9-1.4,41.6-0.2,62,4.8c38,9.5,68.2,30.2,89.8,62.9c30.5,46.3,35.1,98.3,33.3,152.6H1038
        			c0.4,4,0.4,7,1,9.9c10.3,47.8,50,77.1,100.3,74.6c32.6-1.6,59.4-14.7,81.5-38.3c3-3.2,6-6.6,9.4-10.3c21.7,16.4,43,32.5,65,49.2
        			c-49.2,59.9-112.5,80.4-186.6,69.9c-76.7-10.8-144.5-64-160.3-154.2c-23,0-451.3-2.1-475.6-2.1c0,10.6,0.1,21,0,31.4
        			c-0.1,7.9,2.3,17.6-1.4,23.2c-3.7,5.5-13.5,7.1-20.7,10.1c-62.3,25.3-124.6,50.4-186.9,75.5c-4.9,1.9-10,2.9-15.3,3
        			c-20.6,0.3-41.2,0.2-61.7,0.1c-14.4,0-12.8,1.7-12.9-12.5c0-18,0-35.9,0-53.8v-9.3h-10.3c-48,0-96-0.2-144,0.2
        			c-7.3,0-11.1-2.6-13.8-8.8C-2,261-2,243.5,6.3,226c2.5-5.3,6-7.6,12.3-7.5c48.3,0.3,96.5,0.1,144.8,0.1
        			C166.6,218.6,200.8,219.6,204.6,219.6z M1220.4,152.2c-0.4-22.3-6.3-42-21.7-58c-20.2-20.9-46-26.7-73.8-25.5
        			c-43.8,1.9-73.4,26.4-84.4,68.8c-1.2,4.7-1.8,9.5-2.8,14.7L1220.4,152.2z"
            ></path>
          </g>
          <g class="st1">
            <path
              class="st0"
              d="M1732.5,562.9c104,0,156,60,156,132.5c0,52.6-29.1,105.8-98.4,124.4L1893.4,995h-100.3l-95.3-168.4H1657V995
        			h-86.7V562.9H1732.5z M1729.4,634.7H1657v126.9h72.4c48.3,0,69.9-25.4,69.9-64.4C1799.4,658.9,1777.7,634.7,1729.4,634.7z"
            ></path>
            <path
              class="st0"
              d="M2531.4,667.5c85.4,0,143,44.6,161.6,121.3h-93.5c-9.9-29.1-32.8-47.7-68.7-47.7
        			c-48.3,0-80.5,36.5-80.5,103.4s32.2,102.8,80.5,102.8c35.9,0,58.2-16.1,68.7-47h93.5c-18.6,73-76.1,121.3-161.6,121.3
        			c-99,0-169.6-69.3-169.6-177C2361.8,736.8,2432.3,667.5,2531.4,667.5z"
            ></path>
            <path
              class="st0"
              d="M2756.7,557.9h86.7v157.8c22.3-29.1,60.7-47.7,106.5-47.7c77.4,0,133.7,52,133.7,146.7V1016h-86.7V826.6
        			c0-55.1-30.3-84.8-76.1-84.8c-47,0-77.4,29.7-77.4,84.8V1016h-86.7V557.9z"
            ></path>
            <path
              class="st0"
              d="M3300.2,667.5c55.1,0,92.9,26,113.3,54.5v-48.9h87.3V1016h-87.3v-50.1c-20.4,29.7-59.4,55.7-113.9,55.7
        			c-86.7,0-156-71.2-156-178.3C3143.5,736.2,3212.9,667.5,3300.2,667.5z M3322.4,743.6c-46.4,0-90.4,34.7-90.4,99.7
        			s43.9,102.1,90.4,102.1c47.7,0,91-35.9,91-100.9C3413.4,779.5,3370.1,743.6,3322.4,743.6z"
            ></path>
            <path
              class="st0"
              d="M3672.2,1016h-86.7V673.1h86.7v53.2c21.7-35.3,57.6-58.2,105.2-58.2v91h-22.9c-51.4,0-82.3,19.8-82.3,86V1016
        			z"
            ></path>
            <path
              class="st0"
              d="M3969.9,667.5c53.9,0,92.9,24.8,113.3,54.5v-48.9h87.3v345.4c0,92.9-56.9,166.5-169.6,166.5
        			c-96.6,0-164-48.3-172.7-126.9h86c8.7,31,40.9,51.4,84.2,51.4c47.7,0,84.8-27.2,84.8-91v-53.2c-20.4,29.7-59.4,56.3-113.3,56.3
        			c-87.3,0-156.6-71.2-156.6-178.3C3813.3,736.2,3882.6,667.5,3969.9,667.5z M3992.2,743.6c-46.4,0-90.4,34.7-90.4,99.7
        			s43.9,102.1,90.4,102.1c47.7,0,91-35.9,91-100.9C4083.2,779.5,4039.9,743.6,3992.2,743.6z"
            ></path>
            <path
              class="st0"
              d="M4405.1,1021.6c-99.7,0-172.1-69.3-172.1-177c0-108.3,70.6-177,172.1-177c99,0,169,67.5,169,169.6
        			c0,11.1-0.6,22.3-2.5,33.4h-250.7c4.3,50.8,39,79.2,82.3,79.2c37.1,0,57.6-18.6,68.7-41.5h93.5
        			C4546.8,971.4,4489.9,1021.6,4405.1,1021.6z M4321.5,812.3h162.8c-1.2-45.2-37.1-73.7-81.7-73.7
        			C4361.1,738.7,4328.3,765.3,4321.5,812.3z"
            ></path>
          </g>
        </g>
      </svg>

      <nav>
        <ul class="unstyled-list flex">
          <li>
            <button class="btn btn--primary" data-modal="app" @click="showModal">Ga naar de app</button>
          </li>
          <li>
            <button
              class="btn btn--primary"
              data-modal="dashboard"
              @click="showModal"
            >Ga naar het dashboard</button>
          </li>
        </ul>
      </nav>
    </div>
    <div class="site__content container">
      <section class="site__content-section">
        <h2>Wat voor product is dit?</h2>
        <hr class="hr">
        <p
          class="site-paragraph"
        >Dit is een prototype voor een voorstel voor een nieuwe app, waarbij gebruikers meldingen kunnen doorgeven over laadpalen. Deze meldingen kunnen storingen zijn, maar bijvoorbeeld ook het bezet zijn van de laadplek.</p>
      </section>

      <section class="site__content-section">
        <h2>Prototype opties</h2>
        <hr class="hr">
        <div class="site__content-holder">
          <h3>Meldingen-app opties</h3>
          <p>In de app voor gebruikers om meldingen te maken kun je:</p>
          <ul>
            <li>Een melding maken over een probleem bij een specifieke laadpaal</li>
            <li>De status van deze meldingen inzien in je meldingen tab</li>
            <li>Een overzicht bekijken van beschikbare laadpalen in de buurt</li>
          </ul>
        </div>
        <div class="site__content-holder">
          <h3>Dashboard opties</h3>
          <p>In het dashboard voor beheerders kun je:</p>
          <ul>
            <li>Een overzicht bekijken van alle laadpalen in Amsterdam en hun huidige status</li>
            <li>Een overzicht bekijken van alle meldingen en de status van meldingen, die door jou als specifieke instantie afgehandeld moeten worden, updaten</li>
            <li>Inzichten uitlezen over data van het aantal meldingen en beschikbare laadpalen</li>
          </ul>
        </div>
      </section>

      <nav>
        <ul class="unstyled-list flex">
          <li>
            <button
              class="btn btn--primary white-space-nowrap"
              data-modal="app"
              @click="showModal"
            >Ga naar de app</button>
          </li>
          <li>
            <button
              class="btn btn--primary white-space-nowrap"
              data-modal="dashboard"
              @click="showModal"
            >Ga naar het dashboard</button>
          </li>
        </ul>
      </nav>
    </div>

    <Modal ref="app_modal">
      <template v-slot:header>
        <div class="modal__container">
          <p>Opmerking: de app is gemaakt om op mobiel gebruikt te worden. De beste ervaring is dan ook om deze te bekijken op een mobiel apparaat.</p>Voor we beginnen willen we vragen om een naam door te geven voor je app account:
        </div>
      </template>
      <template v-slot:content>
        <form class="form form--center" @submit.prevent="setAppSettings">
          <label class="form-label" for="name__input">Voer een naam in</label>
          <input
            class="form-input"
            required
            type="text"
            autocomplete="off"
            name="name"
            id="name__input"
            v-model="name"
          >
          <input
            v-if="name"
            class="btn btn--primary white-space-wrap"
            type="submit"
            :value="'\'' + name + '\' opslaan en door naar app'"
          >
          <button v-else class="btn btn--primary btn--disabled">Voer een naam in</button>
        </form>
      </template>
    </Modal>

    <Modal ref="dashboard_modal">
      <template v-slot:header>
        <div
          class="modal__container"
        >Voor we beginnen willen we vragen een instantie te kiezen als beheerder voor de laadpalen:</div>
      </template>
      <template v-slot:content>
        <form class="form form--center" @submit.prevent="setDashboardSettings">
          <label class="form-label" for="stakeholder__input">Kies stakeholder</label>
          <select
            required
            class="form-input from-input--select"
            name="stakeholder"
            id="stakeholder__input"
            v-model="stakeholder"
          >
            <option
              v-for="stakeholder in stakeholders"
              :value="stakeholder"
              :key="stakeholder"
            >{{stakeholder}}</option>
          </select>
          <input
            v-if="stakeholder"
            class="btn btn--primary"
            type="submit"
            value="Opslaan en door naar dashboard"
          >
          <button v-else class="btn btn--primary btn--disabled">Kies een stakeholder</button>
        </form>
      </template>
    </Modal>

    <div ref="splashscreen" class="splashscreen">
      <img ref="splashscreen__img" class="splashscreen__img" src="/recharge-logo.svg" alt>
    </div>
  </main>
</template>

<script>
import Modal from '~/components/shared/Modal.vue'
import TweenLite from 'gsap'

export default {
  components: {
    Modal
  },
  data() {
    return {
      name: '',
      stakeholder: '',
      stakeholders: ['Gemeente amsterdam', 'NUON']
    }
  },
  mounted() {
    const splashscreen = this.$refs.splashscreen
    const img = this.$refs.splashscreen__img
    const main = this.$refs.main
    TweenLite.to(img, 1, { y: '-3rem', opacity: 1 })
    TweenLite.to(splashscreen, 0.4, { y: '-75vh', opacity: 0, delay: 2 })
    TweenLite.to(img, 0.5, {
      y: '60vh',
      delay: 2,
      onComplete: () => {
        main.classList.remove('constrained')
      }
    })
  },
  methods: {
    showModal(e) {
      const modal = `${e.target.dataset.modal}_modal`
      this.$refs[modal].show(e)
    },
    setDashboardSettings() {
      this.$store.commit('SET_STAKEHOLDER', this.stakeholder)
      this.$router.push({
        path: '/dashboard'
      })
      document.body.style.overflow = 'auto'
    },
    setAppSettings() {
      this.$store.commit('SET_NAME', this.name)
      this.$router.push({
        path: '/client'
      })
      document.body.style.overflow = 'auto'
    }
  }
}
</script>

<style lang="scss" scoped>
@import 'assets/css/config/main.scss';
.container {
  margin: 0 auto;
  min-height: 100vh;
  max-width: 40rem;
  padding: 3rem;
  padding-bottom: 6rem;
  @media screen and (min-width: 60rem) {
    padding-bottom: 10rem;
  }

  a {
    margin-bottom: 10px;
  }

  h2 {
    font-size: 1.5rem;
  }
  h3 {
    font-size: 1.125rem;
    margin: $margin-s 0;
  }
}
.unstyled-list {
  padding: 0;
  list-style: none;
}
.site-paragraph {
  margin: $margin-m 0;
}
.flex {
  display: flex;
  align-items: center;
  flex-direction: column;
  @media screen and (min-width: 40rem) {
    flex-direction: row;
    justify-content: center;
    align-items: flex-start;
  }
}
.site__content-section {
  margin: $margin-m 0;
}
.site__content-holder {
  padding-bottom: 3rem;
  li {
    margin: $margin-xs 0;
  }
  &:last-of-type {
    padding-bottom: 0;
  }
}
.site__header {
  padding: 3rem 1.5rem;
  background-color: #fff;
  @media screen and (min-width: 40rem) {
    padding: 6rem 2rem;
  }
}
.site__title {
  text-align: center;
  font-weight: normal;
  max-width: 30rem;
  margin-left: auto;
  margin-right: auto;
  display: block;
  font-size: 1.75rem;
  .bold {
    font-size: 2rem;
  }
}
.logo-dark {
  width: 80vw;
  max-width: 15rem;
  margin: 0 auto $margin-xl;
  display: block;
  .st0 {
    fill: $color-grey-dark;
  }
}
.modal__container {
  border-radius: $rounding-s 0;
  padding: $padding-l $padding-m;
  background: $color-grey-low;
}
.modal__content {
  .btn {
    margin: $margin-m 0;
    white-space: normal;
  }

  form {
    padding: 0;
  }
}
.site-overview {
  &.constrained {
    max-height: 100vh;
    overflow: hidden;
  }
}
.splashscreen {
  pointer-events: none;
  @include linear-gradient($color-primary);
  width: 100%;
  height: 100vh;
  position: fixed;
  top: 0;
  left: 0;
  &__img {
    position: absolute;
    top: 50%;
    left: 50%;
    opacity: 0;
    transform: translate(-50%, calc(-50% + 3rem));
    width: 50vw;
    max-width: 15rem;
    animation: fadeInUp 1s ease-out;
  }
}
</style>
